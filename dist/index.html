<!DOCTYPE html>
<html>

<head>
</head>

<body>
<header class="w3-container w3-teal">
  <h1>StarCitizen Refinery Tracker</h1>
</header>

<script>
  function openModal(modalId) {
    document.getElementById(modalId).style.display = 'block';
  }

  function closeModal(modalId) {
    document.getElementById(modalId).style.display = 'none'
  }
</script>

<div class="w3-container" id="welcome">
  <h2>About</h2>
  <p>The Refinery Tracker will remember refinery jobs for you. All data is preserved locally through the usage of cookies and local storage</p>
  <h2>Get Started</h2>
  <p>Start by selecting a Username to tie your jobs to. Then use the "Add Refinery Job" button to start tracking Refinery Jobs.</p>
</div>

<div class="w3-container w3-padding" id="user-view">
    
  <div>
    <label class="w3-text-teal">Displaying Refinery Jobs for:</label>
    <select id="user-selection" class="w3-select" name="option" onchange="app.onUserChange()">
      <option value="" disabled selected>No users available. Create a new User.</option>
    </select>
  </div>
  <!-- TODO align-->
  <div id="user-buttons" class="w3-container">
    <div class="w3-bar">
        <button class="w3-button w3-blue" onclick="openModal('add-user-form-modal')">Add User</button>
      <button class="w3-button w3-red w3-disabled" id="remove-user-btn" onclick="app.prepareRemoveUser()">Remove User</button>
    </div>
  </div>

  <div id="add-user-form-modal" class="w3-modal">
    <div class="w3-modal-content" id="add-user-form-parent">
      <div class="w3-container w3">
        <h2>Add User</h2>
        <span onclick="closeModal('add-user-form-modal')" class="w3-button w3-display-topright">&times;</span>
      </div>
      
      <form class="w3-container" id="user-form">
        <label class="w3-text-teal">Username</label>
        <input class="w3-input w3-border w3-light-grey" type="text" name="username">

        <button class="w3-btn w3-blue-grey" onclick="app.addUser()">Add</button>
      </form>
    </div>
  </div>

  <div id="remove-user-form-modal" class="w3-modal">
    <div class="w3-modal-content" id="remove-user-form-parent">
      <div class="w3-container w3">
        <h2 id="remove-user-header">Remove User</h2>
        <span onclick="closeModal('remove-user-form-modal')" class="w3-button w3-display-topright">&times;</span>
      </div>
      <div>
        <p><b>Warning!</b> Removing this user will remove all their runs. Are you sure?</p>
      </div>
      
      <button class="w3-btn w3-blue-grey" onclick="app.confirmRemoveUser()">Remove</button>
    </div>
  </div>
</div>

<!-- todo use login form: https://www.w3schools.com/w3css/w3css_modal.asp-->
<div id="input-form-modal" class="w3-modal">
  <div class="w3-modal-content" id="input-form-parent">
    <div class="w3-container w3-teal">
      <h2>Refinery Job</h2>
      <span onclick="closeModal('input-form-modal')" class="w3-button w3-display-topright">&times;</span>
    </div>
    
    <form class="w3-container" id="entry-form">
      <label class="w3-text-teal"><b>Location</b></label>
      <select class="w3-select" name="location">
        <option value="" disabled selected>Choose Refinery</option>
        <option value="ARC-L1">ARC-L1</option>
        <option value="CRU-L1">CRU-L1</option>
        <option value="HUR-L1">HUR-L1</option>
        <option value="HUR-L2">HUR-L2</option>
        <option value="MIC-L1">MIC-L1</option>
      </select>
    
      <label class="w3-text-teal"><b>Expected Duration</b></label>
      <input class="w3-input w3-border w3-light-grey" type="text" name="duration">
    
      <label class="w3-text-teal"><b>Yield Amount</b></label>
      <input class="w3-input w3-border w3-light-grey" type="number" name="yieldAmount">

      <button class="w3-btn w3-blue-grey" onclick="app.submitJobEntry()">Track</button>
    </form>
  </div>
</div>

<div class="w3-container w3-margin">
  <div class="w3-container">
    <button class="w3-button w3-black"  onclick="openModal('input-form-modal')">Add Refinery Job</button>
  </div>
  <table id="runs-table" class="w3-table w3-bordered w3-striped">
    <thead>
      <!-- todo sortable -->
      <tr>
        <th>Location</th>
        <th>Duration</th>
        <th>Time Remaining</th>
        <th>Yield</th>
        <th>Status</th>
        <th>Action</th>
      </tr>
  </thead>
  <tbody></tbody>
  </table>
</div>

</body>
<script src="main.js"></script>
<script>app.startApp()</script>

</html>